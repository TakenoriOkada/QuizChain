{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/components/Navbar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\nexport default function Navbar() {\n  const [address, setAddress] = useState<string | undefined>(undefined);\n  const [chainId, setChainId] = useState<number | undefined>(undefined);\n  const [connecting, setConnecting] = useState(false);\n  const w = typeof window !== \"undefined\" ? (window as any).ethereum : undefined;\n\n  useEffect(() => {\n    if (!w) return;\n    w.request({ method: \"eth_accounts\" }).then((accounts: string[]) => {\n      setAddress(accounts?.[0]);\n    });\n    w.request({ method: \"eth_chainId\" }).then((h: string) => setChainId(parseInt(h, 16)));\n    const onAcc = (accs: string[]) => setAddress(accs?.[0]);\n    const onChain = (h: string) => setChainId(parseInt(h, 16));\n    w.on?.(\"accountsChanged\", onAcc);\n    w.on?.(\"chainChanged\", onChain);\n    return () => {\n      w.removeListener?.(\"accountsChanged\", onAcc);\n      w.removeListener?.(\"chainChanged\", onChain);\n    };\n  }, [w]);\n\n  const isSepolia = chainId === 11155111;\n  const shortAddr = useMemo(() => (address ? `${address.slice(0, 6)}...${address.slice(-4)}` : \"\"), [address]);\n\n  const connect = async () => {\n    if (!w) {\n      alert(\"请先安装 MetaMask\");\n      return;\n    }\n    setConnecting(true);\n    try {\n      const accounts: string[] = await w.request({ method: \"eth_requestAccounts\" });\n      setAddress(accounts?.[0]);\n    } finally {\n      setConnecting(false);\n    }\n  };\n\n  const switchToSepolia = async () => {\n    if (!w) return;\n    try {\n      await w.request({ method: \"wallet_switchEthereumChain\", params: [{ chainId: \"0xaa36a7\" }] });\n    } catch (e: any) {\n      // 如果未添加网络，提示用户手动添加\n      alert(\"请在钱包中切换到 Sepolia 网络再试。\");\n    }\n  };\n\n  return (\n    <div style={{ position: \"sticky\", top: 0, zIndex: 50, backdropFilter: \"blur(8px)\", background: \"rgba(0,0,0,0.25)\", borderBottom: \"1px solid rgba(0,224,255,0.2)\" }}>\n      <div style={{ maxWidth: 1200, margin: \"0 auto\", padding: \"12px 16px\", display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n        <div className=\"neon-text\" style={{ fontWeight: 900 }}>QuizChain</div>\n        <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\n          {address ? (\n            <>\n              <span style={{ fontFamily: \"monospace\", color: \"#00E0FF\" }}>{shortAddr}</span>\n              <span style={{ color: isSepolia ? \"#7ee787\" : \"#ff6b6b\" }}>{isSepolia ? \"Sepolia\" : `Chain ${chainId}`}</span>\n              {!isSepolia && (\n                <button className=\"neon-button\" onClick={switchToSepolia} style={{ padding: \"8px 12px\" }}>切到 Sepolia</button>\n              )}\n            </>\n          ) : (\n            <button className=\"neon-button\" onClick={connect} disabled={connecting} style={{ padding: \"8px 12px\" }}>\n              {connecting ? \"连接中…\" : \"连接钱包\"}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAqB;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAqB;IAC3D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,IAAI,sCAAgC,0BAA2B;IAErE,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,GAAG;QACR,EAAE,OAAO,CAAC;YAAE,QAAQ;QAAe,GAAG,IAAI,CAAC,CAAC;YAC1C,WAAW,UAAU,CAAC,EAAE;QAC1B;QACA,EAAE,OAAO,CAAC;YAAE,QAAQ;QAAc,GAAG,IAAI,CAAC,CAAC,IAAc,WAAW,SAAS,GAAG;QAChF,MAAM,QAAQ,CAAC,OAAmB,WAAW,MAAM,CAAC,EAAE;QACtD,MAAM,UAAU,CAAC,IAAc,WAAW,SAAS,GAAG;QACtD,EAAE,EAAE,GAAG,mBAAmB;QAC1B,EAAE,EAAE,GAAG,gBAAgB;QACvB,OAAO;YACL,EAAE,cAAc,GAAG,mBAAmB;YACtC,EAAE,cAAc,GAAG,gBAAgB;QACrC;IACF,GAAG;QAAC;KAAE;IAEN,MAAM,YAAY,YAAY;IAC9B,MAAM,YAAY,IAAA,gNAAO,EAAC,IAAO,UAAU,GAAG,QAAQ,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,QAAQ,KAAK,CAAC,CAAC,IAAI,GAAG,IAAK;QAAC;KAAQ;IAE3G,MAAM,UAAU;QACd,IAAI,CAAC,GAAG;YACN,MAAM;YACN;QACF;QACA,cAAc;QACd,IAAI;YACF,MAAM,WAAqB,MAAM,EAAE,OAAO,CAAC;gBAAE,QAAQ;YAAsB;YAC3E,WAAW,UAAU,CAAC,EAAE;QAC1B,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,CAAC,GAAG;QACR,IAAI;YACF,MAAM,EAAE,OAAO,CAAC;gBAAE,QAAQ;gBAA8B,QAAQ;oBAAC;wBAAE,SAAS;oBAAW;iBAAE;YAAC;QAC5F,EAAE,OAAO,GAAQ;YACf,mBAAmB;YACnB,MAAM;QACR;IACF;IAEA,qBACE,8OAAC;QAAI,OAAO;YAAE,UAAU;YAAU,KAAK;YAAG,QAAQ;YAAI,gBAAgB;YAAa,YAAY;YAAoB,cAAc;QAAgC;kBAC/J,cAAA,8OAAC;YAAI,OAAO;gBAAE,UAAU;gBAAM,QAAQ;gBAAU,SAAS;gBAAa,SAAS;gBAAQ,YAAY;gBAAU,gBAAgB;YAAgB;;8BAC3I,8OAAC;oBAAI,WAAU;oBAAY,OAAO;wBAAE,YAAY;oBAAI;8BAAG;;;;;;8BACvD,8OAAC;oBAAI,OAAO;wBAAE,SAAS;wBAAQ,KAAK;wBAAI,YAAY;oBAAS;8BAC1D,wBACC;;0CACE,8OAAC;gCAAK,OAAO;oCAAE,YAAY;oCAAa,OAAO;gCAAU;0CAAI;;;;;;0CAC7D,8OAAC;gCAAK,OAAO;oCAAE,OAAO,YAAY,YAAY;gCAAU;0CAAI,YAAY,YAAY,CAAC,MAAM,EAAE,SAAS;;;;;;4BACrG,CAAC,2BACA,8OAAC;gCAAO,WAAU;gCAAc,SAAS;gCAAiB,OAAO;oCAAE,SAAS;gCAAW;0CAAG;;;;;;;qDAI9F,8OAAC;wBAAO,WAAU;wBAAc,SAAS;wBAAS,UAAU;wBAAY,OAAO;4BAAE,SAAS;wBAAW;kCAClG,aAAa,SAAS;;;;;;;;;;;;;;;;;;;;;;AAOrC","debugId":null}}]
}