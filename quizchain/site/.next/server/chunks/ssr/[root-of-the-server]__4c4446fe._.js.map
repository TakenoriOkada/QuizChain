{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/abi/QuizChainABI.ts"],"sourcesContent":["export const QuizChainABI = {\n  \"abi\": [\n    {\n      \"inputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"constructor\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"sender\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721IncorrectOwner\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"ERC721InsufficientApproval\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"approver\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidApprover\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidOperator\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidOwner\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"receiver\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidReceiver\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"sender\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidSender\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"ERC721NonexistentToken\",\n      \"type\": \"error\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"quizId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"bool\",\n          \"name\": \"correct\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"AnswerVerified\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"approved\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"Approval\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"bool\",\n          \"name\": \"approved\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"ApprovalForAll\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"NFTClaimed\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"score\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"QuizCompleted\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"Transfer\",\n      \"type\": \"event\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"approve\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"balanceOf\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"claimNFT\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getApproved\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"getEncryptedScore\",\n      \"outputs\": [\n        {\n          \"internalType\": \"euint32\",\n          \"name\": \"\",\n          \"type\": \"bytes32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"offset\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"limit\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getPlayers\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address[]\",\n          \"name\": \"\",\n          \"type\": \"address[]\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"isApprovedForAll\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"name\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"nextTokenId\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"ownerOf\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"protocolId\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"pure\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"quizzes\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bytes32\",\n          \"name\": \"answerHash\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"points\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"safeTransferFrom\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"data\",\n          \"type\": \"bytes\"\n        }\n      ],\n      \"name\": \"safeTransferFrom\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"scoreThreshold\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"approved\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"setApprovalForAll\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"quizId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes32\",\n          \"name\": \"answerHash\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"points\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"name\": \"setQuiz\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256[]\",\n          \"name\": \"quizIds\",\n          \"type\": \"uint256[]\"\n        },\n        {\n          \"internalType\": \"bytes32[]\",\n          \"name\": \"answerHashes\",\n          \"type\": \"bytes32[]\"\n        },\n        {\n          \"internalType\": \"uint32[]\",\n          \"name\": \"points\",\n          \"type\": \"uint32[]\"\n        }\n      ],\n      \"name\": \"setQuizzes\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"threshold\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"name\": \"setScoreThreshold\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"bytes4\",\n          \"name\": \"interfaceId\",\n          \"type\": \"bytes4\"\n        }\n      ],\n      \"name\": \"supportsInterface\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"symbol\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"tokenURI\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"transferFrom\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"quizId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes32\",\n          \"name\": \"answerHash\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"externalEuint32\",\n          \"name\": \"encryptedPoints\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"inputProof\",\n          \"type\": \"bytes\"\n        }\n      ],\n      \"name\": \"verifyAnswer\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }\n  ]\n} as const;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/abi/QuizChainAddresses.ts"],"sourcesContent":["export const QuizChainAddresses = {\n  \"sepolia\": {\n    \"address\": \"0x0E90c808CEF5C81ccb55165976823996e3213eBF\",\n    \"chainName\": \"sepolia\"\n  }\n} as const;\n"],"names":[],"mappings":";;;;AAAO,MAAM,qBAAqB;IAChC,WAAW;QACT,WAAW;QACX,aAAa;IACf;AACF","debugId":null}},
    {"offset": {"line": 767, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/fhevm/internal/fhevm.ts"],"sourcesContent":["import { Eip1193Provider, JsonRpcProvider, isAddress } from \"ethers\";\nimport type { FhevmInstance, FhevmInstanceConfig } from \"../types\";\n\ntype FhevmWindowType = typeof window & {\n  relayerSDK: any & { __initialized__?: boolean; SepoliaConfig: any };\n};\n\nconst SDK_CDN_URL =\n  \"https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs\";\n\nfunction isFhevmWindowType(w: any): w is FhevmWindowType {\n  return typeof w !== \"undefined\" && w.relayerSDK;\n}\n\nexport const loadSDK = (): Promise<void> =>\n  new Promise((resolve, reject) => {\n    if (isFhevmWindowType(window) && window.relayerSDK) {\n      resolve();\n      return;\n    }\n    const s = document.createElement(\"script\");\n    s.src = SDK_CDN_URL;\n    s.type = \"text/javascript\";\n    s.async = true;\n    s.onload = () => resolve();\n    s.onerror = () => reject(new Error(\"Failed to load Relayer SDK\"));\n    document.head.appendChild(s);\n  });\n\nexport const initSDK = async (): Promise<void> => {\n  if (!isFhevmWindowType(window)) throw new Error(\"window.relayerSDK missing\");\n  if (window.relayerSDK.__initialized__) return;\n  const ok = await window.relayerSDK.initSDK();\n  if (!ok) throw new Error(\"initSDK failed\");\n  window.relayerSDK.__initialized__ = true;\n};\n\nasync function getChainId(providerOrUrl: Eip1193Provider | string): Promise<number> {\n  if (typeof providerOrUrl === \"string\") {\n    const p = new JsonRpcProvider(providerOrUrl);\n    return Number((await p.getNetwork()).chainId);\n  }\n  const hex = (await providerOrUrl.request({ method: \"eth_chainId\" })) as string;\n  return Number.parseInt(hex, 16);\n}\n\nasync function getWeb3Client(rpcUrl: string) {\n  const rpc = new JsonRpcProvider(rpcUrl);\n  const v = await rpc.send(\"web3_clientVersion\", []);\n  await rpc.destroy();\n  return String(v);\n}\n\nasync function tryFetchFHEVMHardhatNodeRelayerMetadata(rpcUrl: string) {\n  const version = await getWeb3Client(rpcUrl);\n  if (!version.toLowerCase().includes(\"hardhat\")) return undefined;\n  const rpc = new JsonRpcProvider(rpcUrl);\n  try {\n    const meta = await rpc.send(\"fhevm_relayer_metadata\", []);\n    return meta as {\n      ACLAddress: `0x${string}`;\n      InputVerifierAddress: `0x${string}`;\n      KMSVerifierAddress: `0x${string}`;\n    };\n  } finally {\n    await rpc.destroy();\n  }\n}\n\ntype ResolveResult =\n  | { isMock: true; chainId: number; rpcUrl: string }\n  | { isMock: false; chainId: number; rpcUrl?: string };\n\nasync function resolve(providerOrUrl: Eip1193Provider | string, mockChains?: Record<number, string>): Promise<ResolveResult> {\n  const chainId = await getChainId(providerOrUrl);\n  let rpcUrl = typeof providerOrUrl === \"string\" ? providerOrUrl : undefined;\n  const defaults = { 31337: \"http://localhost:8545\", ...(mockChains ?? {}) };\n  if (Object.hasOwn(defaults, chainId)) {\n    if (!rpcUrl) rpcUrl = defaults[chainId];\n    return { isMock: true, chainId, rpcUrl: rpcUrl! };\n  }\n  return { isMock: false, chainId, rpcUrl };\n}\n\nexport async function createFhevmInstance(parameters: {\n  provider: Eip1193Provider | string;\n  mockChains?: Record<number, string>;\n}): Promise<FhevmInstance> {\n  const { provider, mockChains } = parameters;\n  const { isMock, rpcUrl } = await resolve(provider, mockChains);\n\n  if (isMock) {\n    const meta = await tryFetchFHEVMHardhatNodeRelayerMetadata(rpcUrl!);\n    if (meta) {\n      const mod = await import(\"./mock/fhevmMock\");\n      return mod.fhevmMockCreateInstance({ rpcUrl: rpcUrl!, chainId: 31337, metadata: meta });\n    }\n  }\n\n  await loadSDK();\n  await initSDK();\n\n  const relayerSDK = (window as unknown as FhevmWindowType).relayerSDK;\n  const cfg = relayerSDK.SepoliaConfig;\n  const config: FhevmInstanceConfig = { ...cfg, network: provider };\n  const instance = await relayerSDK.createInstance(config);\n  return instance as FhevmInstance;\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAOA,MAAM,cACJ;AAEF,SAAS,kBAAkB,CAAM;IAC/B,OAAO,OAAO,MAAM,eAAe,EAAE,UAAU;AACjD;AAEO,MAAM,UAAU,IACrB,IAAI,QAAQ,CAAC,SAAS;QACpB,IAAI,kBAAkB,WAAW,OAAO,UAAU,EAAE;YAClD;YACA;QACF;QACA,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,GAAG,GAAG;QACR,EAAE,IAAI,GAAG;QACT,EAAE,KAAK,GAAG;QACV,EAAE,MAAM,GAAG,IAAM;QACjB,EAAE,OAAO,GAAG,IAAM,OAAO,IAAI,MAAM;QACnC,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;AAEK,MAAM,UAAU;IACrB,IAAI,CAAC,kBAAkB,SAAS,MAAM,IAAI,MAAM;IAChD,IAAI,OAAO,UAAU,CAAC,eAAe,EAAE;IACvC,MAAM,KAAK,MAAM,OAAO,UAAU,CAAC,OAAO;IAC1C,IAAI,CAAC,IAAI,MAAM,IAAI,MAAM;IACzB,OAAO,UAAU,CAAC,eAAe,GAAG;AACtC;AAEA,eAAe,WAAW,aAAuC;IAC/D,IAAI,OAAO,kBAAkB,UAAU;QACrC,MAAM,IAAI,IAAI,2LAAe,CAAC;QAC9B,OAAO,OAAO,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE,OAAO;IAC9C;IACA,MAAM,MAAO,MAAM,cAAc,OAAO,CAAC;QAAE,QAAQ;IAAc;IACjE,OAAO,OAAO,QAAQ,CAAC,KAAK;AAC9B;AAEA,eAAe,cAAc,MAAc;IACzC,MAAM,MAAM,IAAI,2LAAe,CAAC;IAChC,MAAM,IAAI,MAAM,IAAI,IAAI,CAAC,sBAAsB,EAAE;IACjD,MAAM,IAAI,OAAO;IACjB,OAAO,OAAO;AAChB;AAEA,eAAe,wCAAwC,MAAc;IACnE,MAAM,UAAU,MAAM,cAAc;IACpC,IAAI,CAAC,QAAQ,WAAW,GAAG,QAAQ,CAAC,YAAY,OAAO;IACvD,MAAM,MAAM,IAAI,2LAAe,CAAC;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI,CAAC,0BAA0B,EAAE;QACxD,OAAO;IAKT,SAAU;QACR,MAAM,IAAI,OAAO;IACnB;AACF;AAMA,eAAe,QAAQ,aAAuC,EAAE,UAAmC;IACjG,MAAM,UAAU,MAAM,WAAW;IACjC,IAAI,SAAS,OAAO,kBAAkB,WAAW,gBAAgB;IACjE,MAAM,WAAW;QAAE,OAAO;QAAyB,GAAI,cAAc,CAAC,CAAC;IAAE;IACzE,IAAI,OAAO,MAAM,CAAC,UAAU,UAAU;QACpC,IAAI,CAAC,QAAQ,SAAS,QAAQ,CAAC,QAAQ;QACvC,OAAO;YAAE,QAAQ;YAAM;YAAS,QAAQ;QAAQ;IAClD;IACA,OAAO;QAAE,QAAQ;QAAO;QAAS;IAAO;AAC1C;AAEO,eAAe,oBAAoB,UAGzC;IACC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG;IACjC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,UAAU;IAEnD,IAAI,QAAQ;QACV,MAAM,OAAO,MAAM,wCAAwC;QAC3D,IAAI,MAAM;YACR,MAAM,MAAM;YACZ,OAAO,IAAI,uBAAuB,CAAC;gBAAE,QAAQ;gBAAS,SAAS;gBAAO,UAAU;YAAK;QACvF;IACF;IAEA,MAAM;IACN,MAAM;IAEN,MAAM,aAAa,AAAC,OAAsC,UAAU;IACpE,MAAM,MAAM,WAAW,aAAa;IACpC,MAAM,SAA8B;QAAE,GAAG,GAAG;QAAE,SAAS;IAAS;IAChE,MAAM,WAAW,MAAM,WAAW,cAAc,CAAC;IACjD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 878, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/app/records/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { BrowserProvider, Contract, JsonRpcSigner, ethers } from \"ethers\";\nimport { QuizChainABI } from \"../../abi/QuizChainABI\";\nimport { QuizChainAddresses } from \"../../abi/QuizChainAddresses\";\nimport { createFhevmInstance } from \"../../fhevm/internal/fhevm\";\n\ntype MyRecord = {\n  quizId: bigint;\n  correct: boolean;\n  txHash: string;\n  blockNumber: number;\n  timestamp?: number;\n};\n\nexport default function RecordsPage() {\n  const [signer, setSigner] = useState<JsonRpcSigner | undefined>(undefined);\n  const [address, setAddress] = useState<string | undefined>(undefined);\n  const [chainId, setChainId] = useState<number | undefined>(undefined);\n  const [instance, setInstance] = useState<any>(undefined);\n  const [loading, setLoading] = useState(false);\n  const [rows, setRows] = useState<MyRecord[]>([]);\n  const [scoreHandle, setScoreHandle] = useState<string | undefined>(undefined);\n  const [scoreClear, setScoreClear] = useState<string | undefined>(undefined);\n  const [message, setMessage] = useState<string>(\"\");\n  const [revealed, setRevealed] = useState<boolean>(false);\n\n  useEffect(() => {\n    const w = (window as any).ethereum;\n    if (!w) return;\n    const bp = new BrowserProvider(w);\n    bp.getSigner().then(async (s) => {\n      setSigner(s);\n      setAddress(await s.getAddress());\n    });\n    w.request({ method: \"eth_chainId\" }).then((h: string) => setChainId(parseInt(h, 16)));\n  }, []);\n\n  useEffect(() => {\n    if (!chainId) return;\n    const w = (window as any).ethereum;\n    if (!w) return;\n    createFhevmInstance({ provider: w, mockChains: { 31337: \"http://localhost:8545\" } })\n      .then((i) => setInstance(i))\n      .catch((e) => setMessage(\"Init FHEVM failed: \" + e?.message));\n  }, [chainId]);\n\n  const contractInfo = useMemo(() => {\n    if (!chainId) return undefined as any;\n    const n = chainId === 31337 ? \"localhost\" : chainId === 11155111 ? \"sepolia\" : undefined;\n    if (!n) return undefined as any;\n    const info = (QuizChainAddresses as any)[n];\n    if (!info?.address) return undefined as any;\n    return info;\n  }, [chainId]);\n\n  const contract = useMemo(() => {\n    if (!signer || !contractInfo?.address) return undefined;\n    return new Contract(contractInfo.address, QuizChainABI.abi, signer);\n  }, [signer, contractInfo]);\n\n  const refreshRecords = useCallback(async () => {\n    if (!contract || !address) return;\n    setLoading(true);\n    try {\n      const filter = (contract as any).filters.AnswerVerified(address);\n      const latest = await contract.runner!.provider!.getBlockNumber();\n      const fromBlock = Math.max(0, latest - 200000); // 最近约20万块\n      const logs = await contract.queryFilter(filter, fromBlock, latest);\n      const items: MyRecord[] = logs.map((l: any) => ({\n        quizId: l.args[1] as bigint,\n        correct: Boolean(l.args[2]),\n        txHash: l.transactionHash,\n        blockNumber: l.blockNumber,\n      }));\n      // 附带区块时间\n      const provider = contract.runner!.provider!;\n      for (const it of items) {\n        const b = await provider.getBlock(it.blockNumber);\n        it.timestamp = Number(b?.timestamp ?? 0);\n      }\n      items.sort((a, b) => b.blockNumber - a.blockNumber);\n      setRows(items);\n    } catch (e: any) {\n      setMessage(\"读取事件失败: \" + e?.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [contract, address]);\n\n  const loadScoreHandle = useCallback(async () => {\n    if (!contract) return;\n    try {\n      const h: string = await (contract as any).getEncryptedScore();\n      setScoreHandle(h);\n    } catch (e: any) {\n      setMessage(\"读取加密分数失败: \" + e?.message);\n    }\n  }, [contract]);\n\n  const decryptScore = useCallback(async () => {\n    if (!instance || !signer || !contractInfo?.address || !scoreHandle) return;\n    try {\n      setMessage(\"正在发起解密签名...\");\n      const userAddress = await signer.getAddress();\n      const relayer: any = instance;\n      const { publicKey, privateKey } = relayer.generateKeypair();\n      const startTs = Math.floor(Date.now() / 1000);\n      const durationDays = 365;\n      const eip712 = relayer.createEIP712(\n        publicKey,\n        [contractInfo.address],\n        startTs,\n        durationDays\n      );\n      const signature = await signer.signTypedData(\n        eip712.domain,\n        { UserDecryptRequestVerification: eip712.types.UserDecryptRequestVerification },\n        eip712.message\n      );\n      setMessage(\"调用 Relayer 解密中...\");\n      const res = await relayer.userDecrypt(\n        [{ handle: scoreHandle, contractAddress: contractInfo.address }],\n        privateKey,\n        publicKey,\n        signature,\n        [contractInfo.address],\n        userAddress,\n        startTs,\n        durationDays\n      );\n      const v = res[scoreHandle];\n      setScoreClear(String(v));\n      setMessage(\"解密成功\");\n      setRevealed(true);\n    } catch (e: any) {\n      setMessage(\"解密失败: \" + e?.message);\n    }\n  }, [instance, signer, contractInfo, scoreHandle]);\n\n  useEffect(() => {\n    if (contract) {\n      refreshRecords();\n      loadScoreHandle();\n    }\n  }, [contract, refreshRecords, loadScoreHandle]);\n\n  const fmtTime = (ts?: number) =>\n    ts ? new Date(ts * 1000).toLocaleString() : \"-\";\n\n  return (\n    <div style={{ minHeight: \"100vh\", padding: \"40px 20px\" }}>\n      <div style={{ maxWidth: 1100, margin: \"0 auto\", display: \"grid\", gap: 20 }}>\n        <h1 className=\"neon-text\" style={{ fontSize: 44, textAlign: \"center\" }}>📘 我的答题记录</h1>\n\n        {/* 顶部信息 */}\n        <div className=\"card\" style={{ display: \"grid\", gap: 10 }}>\n          <div>\n            <span style={{ opacity: 0.7 }}>钱包地址: </span>\n            <span style={{ fontFamily: \"monospace\", color: \"#00E0FF\" }}>{address ? `${address.slice(0, 6)}...${address.slice(-4)}` : \"未连接\"}</span>\n          </div>\n          <div>\n            <span style={{ opacity: 0.7 }}>网络: </span>\n            <span style={{ color: \"#00E0FF\" }}>{chainId === 11155111 ? \"Sepolia\" : chainId === 31337 ? \"Localhost\" : chainId}</span>\n          </div>\n          <div>\n            <span style={{ opacity: 0.7 }}>合约地址: </span>\n            <span style={{ fontFamily: \"monospace\", color: \"#00E0FF\" }}>{contractInfo?.address || \"未部署\"}</span>\n          </div>\n        </div>\n\n        {/* 分数解密 */}\n        <div className=\"card\" style={{ display: \"grid\", gap: 12 }}>\n          <h2 style={{ fontSize: 20, color: \"#00E0FF\" }}>🔐 我的分数</h2>\n          <div style={{ display: \"flex\", alignItems: \"center\", gap: 12 }}>\n            <div className=\"neon-text\" style={{ fontSize: 40, fontWeight: 900 }}>{scoreClear ?? \"-\"}</div>\n            <div style={{ color: \"#888\" }}>（密文句柄: {scoreHandle ? `${scoreHandle.slice(0, 10)}...` : \"-\"}）</div>\n          </div>\n          <div style={{ display: \"flex\", gap: 12 }}>\n            <button className=\"neon-button\" onClick={loadScoreHandle} disabled={!contract}>刷新句柄</button>\n            <button className=\"neon-button\" onClick={decryptScore} disabled={!instance || !scoreHandle}>解密并查看分数</button>\n          </div>\n          {!revealed && (\n            <div style={{ color: \"#9aa3b2\" }}>提示：未解密前，下面每题的正确/错误状态将被隐藏。</div>\n          )}\n        </div>\n\n        {/* 事件列表 */}\n        <div className=\"card\" style={{ padding: 0 }}>\n          <div style={{ padding: 20, borderBottom: \"1px solid rgba(255,255,255,0.1)\", display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n            <h2 style={{ fontSize: 20, color: \"#00E0FF\" }}>🧾 答题事件</h2>\n            <button className=\"neon-button\" onClick={refreshRecords} disabled={!contract || loading}>{loading ? \"刷新中...\" : \"刷新\"}</button>\n          </div>\n          {rows.length === 0 ? (\n            <div style={{ padding: 40, textAlign: \"center\", color: \"#999\" }}>暂无记录</div>\n          ) : (\n            <div style={{ display: \"grid\" }}>\n              {rows.map((r, i) => (\n                <div key={`${r.txHash}-${i}`} style={{ display: \"grid\", gridTemplateColumns: \"120px 1fr 220px 220px\", padding: \"16px 20px\", borderTop: i === 0 ? \"none\" : \"1px solid rgba(255,255,255,0.06)\" }}>\n                  <div style={{ fontFamily: \"monospace\", color: \"#bbb\" }}>#{String(r.blockNumber)}</div>\n                  <div>Quiz ID: <span className=\"neon-text\" style={{ fontWeight: 700 }}>{r.quizId.toString()}</span></div>\n                  {revealed ? (\n                    <div style={{ color: r.correct ? \"#00E676\" : \"#ff6b6b\", fontWeight: 700 }}>{r.correct ? \"✅ 正确\" : \"❌ 错误\"}</div>\n                  ) : (\n                    <div style={{ color: \"#aaa\", fontWeight: 700 }}>🔒 加密</div>\n                  )}\n                  <div style={{ color: \"#aaa\" }}>{fmtTime(r.timestamp)}</div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {message && (\n          <div className=\"card\" style={{ background: \"rgba(0, 224, 255, 0.08)\" }}>{message}</div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}}]
}