{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/fhevm/internal/fhevm.ts"],"sourcesContent":["import { Eip1193Provider, JsonRpcProvider, isAddress } from \"ethers\";\nimport type { FhevmInstance, FhevmInstanceConfig } from \"../types\";\n\ntype FhevmWindowType = typeof window & {\n  relayerSDK: any & { __initialized__?: boolean; SepoliaConfig: any };\n};\n\nconst SDK_CDN_URL =\n  \"https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs\";\n\nfunction isFhevmWindowType(w: any): w is FhevmWindowType {\n  return typeof w !== \"undefined\" && w.relayerSDK;\n}\n\nexport const loadSDK = (): Promise<void> =>\n  new Promise((resolve, reject) => {\n    if (isFhevmWindowType(window) && window.relayerSDK) {\n      resolve();\n      return;\n    }\n    const s = document.createElement(\"script\");\n    s.src = SDK_CDN_URL;\n    s.type = \"text/javascript\";\n    s.async = true;\n    s.onload = () => resolve();\n    s.onerror = () => reject(new Error(\"Failed to load Relayer SDK\"));\n    document.head.appendChild(s);\n  });\n\nexport const initSDK = async (): Promise<void> => {\n  if (!isFhevmWindowType(window)) throw new Error(\"window.relayerSDK missing\");\n  if (window.relayerSDK.__initialized__) return;\n  const ok = await window.relayerSDK.initSDK();\n  if (!ok) throw new Error(\"initSDK failed\");\n  window.relayerSDK.__initialized__ = true;\n};\n\nasync function getChainId(providerOrUrl: Eip1193Provider | string): Promise<number> {\n  if (typeof providerOrUrl === \"string\") {\n    const p = new JsonRpcProvider(providerOrUrl);\n    return Number((await p.getNetwork()).chainId);\n  }\n  const hex = (await providerOrUrl.request({ method: \"eth_chainId\" })) as string;\n  return Number.parseInt(hex, 16);\n}\n\nasync function getWeb3Client(rpcUrl: string) {\n  const rpc = new JsonRpcProvider(rpcUrl);\n  const v = await rpc.send(\"web3_clientVersion\", []);\n  await rpc.destroy();\n  return String(v);\n}\n\nasync function tryFetchFHEVMHardhatNodeRelayerMetadata(rpcUrl: string) {\n  const version = await getWeb3Client(rpcUrl);\n  if (!version.toLowerCase().includes(\"hardhat\")) return undefined;\n  const rpc = new JsonRpcProvider(rpcUrl);\n  try {\n    const meta = await rpc.send(\"fhevm_relayer_metadata\", []);\n    return meta as {\n      ACLAddress: `0x${string}`;\n      InputVerifierAddress: `0x${string}`;\n      KMSVerifierAddress: `0x${string}`;\n    };\n  } finally {\n    await rpc.destroy();\n  }\n}\n\ntype ResolveResult =\n  | { isMock: true; chainId: number; rpcUrl: string }\n  | { isMock: false; chainId: number; rpcUrl?: string };\n\nasync function resolve(providerOrUrl: Eip1193Provider | string, mockChains?: Record<number, string>): Promise<ResolveResult> {\n  const chainId = await getChainId(providerOrUrl);\n  let rpcUrl = typeof providerOrUrl === \"string\" ? providerOrUrl : undefined;\n  const defaults = { 31337: \"http://localhost:8545\", ...(mockChains ?? {}) };\n  if (Object.hasOwn(defaults, chainId)) {\n    if (!rpcUrl) rpcUrl = defaults[chainId];\n    return { isMock: true, chainId, rpcUrl: rpcUrl! };\n  }\n  return { isMock: false, chainId, rpcUrl };\n}\n\nexport async function createFhevmInstance(parameters: {\n  provider: Eip1193Provider | string;\n  mockChains?: Record<number, string>;\n}): Promise<FhevmInstance> {\n  const { provider, mockChains } = parameters;\n  const { isMock, rpcUrl } = await resolve(provider, mockChains);\n\n  if (isMock) {\n    const meta = await tryFetchFHEVMHardhatNodeRelayerMetadata(rpcUrl!);\n    if (meta) {\n      const mod = await import(\"./mock/fhevmMock\");\n      return mod.fhevmMockCreateInstance({ rpcUrl: rpcUrl!, chainId: 31337, metadata: meta });\n    }\n  }\n\n  await loadSDK();\n  await initSDK();\n\n  const relayerSDK = (window as unknown as FhevmWindowType).relayerSDK;\n  const cfg = relayerSDK.SepoliaConfig;\n  const config: FhevmInstanceConfig = { ...cfg, network: provider };\n  const instance = await relayerSDK.createInstance(config);\n  return instance as FhevmInstance;\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAOA,MAAM,cACJ;AAEF,SAAS,kBAAkB,CAAM;IAC/B,OAAO,OAAO,MAAM,eAAe,EAAE,UAAU;AACjD;AAEO,MAAM,UAAU,IACrB,IAAI,QAAQ,CAAC,SAAS;QACpB,IAAI,kBAAkB,WAAW,OAAO,UAAU,EAAE;YAClD;YACA;QACF;QACA,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,GAAG,GAAG;QACR,EAAE,IAAI,GAAG;QACT,EAAE,KAAK,GAAG;QACV,EAAE,MAAM,GAAG,IAAM;QACjB,EAAE,OAAO,GAAG,IAAM,OAAO,IAAI,MAAM;QACnC,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;AAEK,MAAM,UAAU;IACrB,IAAI,CAAC,kBAAkB,SAAS,MAAM,IAAI,MAAM;IAChD,IAAI,OAAO,UAAU,CAAC,eAAe,EAAE;IACvC,MAAM,KAAK,MAAM,OAAO,UAAU,CAAC,OAAO;IAC1C,IAAI,CAAC,IAAI,MAAM,IAAI,MAAM;IACzB,OAAO,UAAU,CAAC,eAAe,GAAG;AACtC;AAEA,eAAe,WAAW,aAAuC;IAC/D,IAAI,OAAO,kBAAkB,UAAU;QACrC,MAAM,IAAI,IAAI,8LAAe,CAAC;QAC9B,OAAO,OAAO,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE,OAAO;IAC9C;IACA,MAAM,MAAO,MAAM,cAAc,OAAO,CAAC;QAAE,QAAQ;IAAc;IACjE,OAAO,OAAO,QAAQ,CAAC,KAAK;AAC9B;AAEA,eAAe,cAAc,MAAc;IACzC,MAAM,MAAM,IAAI,8LAAe,CAAC;IAChC,MAAM,IAAI,MAAM,IAAI,IAAI,CAAC,sBAAsB,EAAE;IACjD,MAAM,IAAI,OAAO;IACjB,OAAO,OAAO;AAChB;AAEA,eAAe,wCAAwC,MAAc;IACnE,MAAM,UAAU,MAAM,cAAc;IACpC,IAAI,CAAC,QAAQ,WAAW,GAAG,QAAQ,CAAC,YAAY,OAAO;IACvD,MAAM,MAAM,IAAI,8LAAe,CAAC;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI,CAAC,0BAA0B,EAAE;QACxD,OAAO;IAKT,SAAU;QACR,MAAM,IAAI,OAAO;IACnB;AACF;AAMA,eAAe,QAAQ,aAAuC,EAAE,UAAmC;IACjG,MAAM,UAAU,MAAM,WAAW;IACjC,IAAI,SAAS,OAAO,kBAAkB,WAAW,gBAAgB;IACjE,MAAM,WAAW;QAAE,OAAO;QAAyB,GAAI,uBAAA,wBAAA,aAAc,CAAC,CAAC;IAAE;IACzE,IAAI,OAAO,MAAM,CAAC,UAAU,UAAU;QACpC,IAAI,CAAC,QAAQ,SAAS,QAAQ,CAAC,QAAQ;QACvC,OAAO;YAAE,QAAQ;YAAM;YAAS,QAAQ;QAAQ;IAClD;IACA,OAAO;QAAE,QAAQ;QAAO;QAAS;IAAO;AAC1C;AAEO,eAAe,oBAAoB,UAGzC;IACC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG;IACjC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,UAAU;IAEnD,IAAI,QAAQ;QACV,MAAM,OAAO,MAAM,wCAAwC;QAC3D,IAAI,MAAM;YACR,MAAM,MAAM;YACZ,OAAO,IAAI,uBAAuB,CAAC;gBAAE,QAAQ;gBAAS,SAAS;gBAAO,UAAU;YAAK;QACvF;IACF;IAEA,MAAM;IACN,MAAM;IAEN,MAAM,aAAa,AAAC,OAAsC,UAAU;IACpE,MAAM,MAAM,WAAW,aAAa;IACpC,MAAM,SAA8B;QAAE,GAAG,GAAG;QAAE,SAAS;IAAS;IAChE,MAAM,WAAW,MAAM,WAAW,cAAc,CAAC;IACjD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/hooks/quizBank.ts"],"sourcesContent":["import { keccak256, toUtf8Bytes } from \"ethers\";\n\nconst QUESTION_ID_BITS = 32n;\nconst QUESTION_ID_MASK = (1n << QUESTION_ID_BITS) - 1n;\nconst BANK_ID_BITS = 224n; // 256 - 32\nconst BANK_ID_MASK = (1n << BANK_ID_BITS) - 1n;\n\nexport function deriveBankIdFromCid(cid: string): bigint {\n  const hex = keccak256(toUtf8Bytes(cid));\n  // 只保留低 224 位，避免左移 32 位后溢出 uint256\n  return BigInt(hex) & BANK_ID_MASK;\n}\n\nexport function makeCompositeId(bankId: bigint, questionId: number): bigint {\n  const bank224 = bankId & BANK_ID_MASK;\n  return (bank224 << QUESTION_ID_BITS) | BigInt(questionId >>> 0);\n}\n\nexport function makeCompositeIdFromCidAndQuestion(cid: string, questionId: number): bigint {\n  const bank = deriveBankIdFromCid(cid);\n  return makeCompositeId(bank, questionId);\n}\n\nexport function splitCompositeId(id: bigint): { bankId: bigint; questionId: number } {\n  const q = Number(id & QUESTION_ID_MASK);\n  const b = id >> QUESTION_ID_BITS;\n  return { bankId: b, questionId: q };\n}\n\nexport function shortHex(bi: bigint, len = 8): string {\n  const hex = bi.toString(16);\n  const h = hex.length > len ? hex.slice(0, len) + \"…\" : hex;\n  return \"0x\" + h;\n}\n\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;;AAEA,MAAM,mBAAmB,GAAG;AAC5B,MAAM,mBAAmB,CAAC,EAAE,IAAI,gBAAgB,IAAI,EAAE;AACtD,MAAM,eAAe,IAAI,EAAE,WAAW;AACtC,MAAM,eAAe,CAAC,EAAE,IAAI,YAAY,IAAI,EAAE;AAEvC,SAAS,oBAAoB,GAAW;IAC7C,MAAM,MAAM,IAAA,wKAAS,EAAC,IAAA,uKAAW,EAAC;IAClC,kCAAkC;IAClC,OAAO,OAAO,OAAO;AACvB;AAEO,SAAS,gBAAgB,MAAc,EAAE,UAAkB;IAChE,MAAM,UAAU,SAAS;IACzB,OAAO,AAAC,WAAW,mBAAoB,OAAO,eAAe;AAC/D;AAEO,SAAS,kCAAkC,GAAW,EAAE,UAAkB;IAC/E,MAAM,OAAO,oBAAoB;IACjC,OAAO,gBAAgB,MAAM;AAC/B;AAEO,SAAS,iBAAiB,EAAU;IACzC,MAAM,IAAI,OAAO,KAAK;IACtB,MAAM,IAAI,MAAM;IAChB,OAAO;QAAE,QAAQ;QAAG,YAAY;IAAE;AACpC;AAEO,SAAS,SAAS,EAAU;QAAE,MAAA,iEAAM;IACzC,MAAM,MAAM,GAAG,QAAQ,CAAC;IACxB,MAAM,IAAI,IAAI,MAAM,GAAG,MAAM,IAAI,KAAK,CAAC,GAAG,OAAO,MAAM;IACvD,OAAO,OAAO;AAChB","debugId":null}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/abi/QuizChainABI.ts"],"sourcesContent":["export const QuizChainABI = {\n  \"abi\": [\n    {\n      \"inputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"constructor\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"sender\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721IncorrectOwner\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"ERC721InsufficientApproval\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"approver\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidApprover\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidOperator\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidOwner\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"receiver\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidReceiver\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"sender\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"ERC721InvalidSender\",\n      \"type\": \"error\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"ERC721NonexistentToken\",\n      \"type\": \"error\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"quizId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"bool\",\n          \"name\": \"correct\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"AnswerVerified\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"approved\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"Approval\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"bool\",\n          \"name\": \"approved\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"ApprovalForAll\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"NFTClaimed\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"user\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"score\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"timestamp\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"QuizCompleted\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": true,\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"Transfer\",\n      \"type\": \"event\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"approve\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"balanceOf\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"claimNFT\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getApproved\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"getEncryptedScore\",\n      \"outputs\": [\n        {\n          \"internalType\": \"euint32\",\n          \"name\": \"\",\n          \"type\": \"bytes32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"offset\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"limit\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"getPlayers\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address[]\",\n          \"name\": \"\",\n          \"type\": \"address[]\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"owner\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"isApprovedForAll\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"name\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"nextTokenId\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"ownerOf\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"protocolId\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"pure\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"quizzes\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bytes32\",\n          \"name\": \"answerHash\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"points\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"safeTransferFrom\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"data\",\n          \"type\": \"bytes\"\n        }\n      ],\n      \"name\": \"safeTransferFrom\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"scoreThreshold\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"operator\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"approved\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"name\": \"setApprovalForAll\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"quizId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes32\",\n          \"name\": \"answerHash\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"points\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"name\": \"setQuiz\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256[]\",\n          \"name\": \"quizIds\",\n          \"type\": \"uint256[]\"\n        },\n        {\n          \"internalType\": \"bytes32[]\",\n          \"name\": \"answerHashes\",\n          \"type\": \"bytes32[]\"\n        },\n        {\n          \"internalType\": \"uint32[]\",\n          \"name\": \"points\",\n          \"type\": \"uint32[]\"\n        }\n      ],\n      \"name\": \"setQuizzes\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint32\",\n          \"name\": \"threshold\",\n          \"type\": \"uint32\"\n        }\n      ],\n      \"name\": \"setScoreThreshold\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"bytes4\",\n          \"name\": \"interfaceId\",\n          \"type\": \"bytes4\"\n        }\n      ],\n      \"name\": \"supportsInterface\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"symbol\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"tokenURI\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"from\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"address\",\n          \"name\": \"to\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"tokenId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"transferFrom\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"quizId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes32\",\n          \"name\": \"answerHash\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"externalEuint32\",\n          \"name\": \"encryptedPoints\",\n          \"type\": \"bytes32\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"inputProof\",\n          \"type\": \"bytes\"\n        }\n      ],\n      \"name\": \"verifyAnswer\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }\n  ]\n} as const;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 893, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/abi/QuizChainAddresses.ts"],"sourcesContent":["export const QuizChainAddresses = {\n  \"sepolia\": {\n    \"address\": \"0xbbF76887163A21F90fcBfcc942a56036953d28A5\",\n    \"chainName\": \"sepolia\"\n  }\n} as const;\n"],"names":[],"mappings":";;;;AAAO,MAAM,qBAAqB;IAChC,WAAW;QACT,WAAW;QACX,aAAa;IACf;AACF","debugId":null}},
    {"offset": {"line": 910, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/hooks/useQuizChain.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { BrowserProvider, Contract, JsonRpcSigner, ethers } from \"ethers\";\nimport { createFhevmInstance } from \"../fhevm/internal/fhevm\";\nimport { makeCompositeIdFromCidAndQuestion } from \"./quizBank\";\nimport { QuizChainABI } from \"../abi/QuizChainABI\";\nimport { QuizChainAddresses } from \"../abi/QuizChainAddresses\";\n\nexport type QuizItem = {\n  id: number;\n  question: string;\n  options: string[];\n  // IPFS 数据通常包含明文答案，前端仅用于本地判定与展示\n  answer?: string;\n};\n\nexport type UseQuizChainParams = {\n  ipfsCid: string; // e.g. \"Qm...\"\n  questionCount?: number; // default 5\n};\n\nexport function useQuizChain(params: UseQuizChainParams) {\n  const { ipfsCid, questionCount = 5 } = params;\n\n  const [provider, setProvider] = useState<ethers.Eip1193Provider | string | undefined>(undefined);\n  const [signer, setSigner] = useState<JsonRpcSigner | undefined>(undefined);\n  const [address, setAddress] = useState<string | undefined>(undefined);\n  const [chainId, setChainId] = useState<number | undefined>(undefined);\n  const [instance, setInstance] = useState<any>(undefined);\n  const [error, setError] = useState<string | undefined>(undefined);\n  const [message, setMessage] = useState<string>(\"\");\n\n  const [allQuestions, setAllQuestions] = useState<QuizItem[]>([]);\n  const [quiz, setQuiz] = useState<QuizItem[]>([]);\n  const [index, setIndex] = useState<number>(0);\n  const [finished, setFinished] = useState<boolean>(false);\n  const [scoreClear, setScoreClear] = useState<string | undefined>(undefined);\n  const [loadingQuestions, setLoadingQuestions] = useState<boolean>(false);\n  const [started, setStarted] = useState<boolean>(false);\n  const [localScore, setLocalScore] = useState<number>(0);\n\n  // --- Web3 init ---\n  useEffect(() => {\n    const w = (window as any).ethereum;\n    if (!w) {\n      setError(\"MetaMask not found\");\n      return;\n    }\n    setProvider(w);\n    const bp = new BrowserProvider(w);\n    bp.getSigner().then((s) => setSigner(s));\n    w.request({ method: \"eth_chainId\" }).then((h: string) => setChainId(parseInt(h, 16)));\n    w.request({ method: \"eth_requestAccounts\" }).then((accounts: string[]) => setAddress(accounts?.[0]));\n  }, []);\n\n  // --- FHEVM instance ---\n  useEffect(() => {\n    if (!provider || !chainId) return;\n    createFhevmInstance({ provider, mockChains: { 31337: \"http://localhost:8545\" } })\n      .then((i) => setInstance(i))\n      .catch((e) => setError(\"Init FHEVM failed: \" + e.message));\n  }, [provider, chainId]);\n\n  const contractInfo = useMemo(() => {\n    if (!chainId) return undefined as any;\n    const n = chainId === 31337 ? \"localhost\" : chainId === 11155111 ? \"sepolia\" : undefined;\n    if (!n) return undefined as any;\n    const info = (QuizChainAddresses as any)[n];\n    if (!info?.address) return undefined as any;\n    return info;\n  }, [chainId]);\n\n  const contract = useMemo(() => {\n    if (!signer || !contractInfo?.address) return undefined;\n    return new Contract(contractInfo.address, QuizChainABI.abi, signer);\n  }, [signer, contractInfo]);\n\n  // --- IPFS load ---\n  const loadFromIPFS = useCallback(async () => {\n    const buildUrls = (value: string): string[] => {\n      if (!value) return [];\n      if (/^https?:\\/\\//i.test(value)) return [value];\n      const cid = value.replace(/^ipfs:\\/\\//i, \"\").replace(/^\\/ipfs\\//i, \"\");\n      return [\n        `https://ipfs.io/ipfs/${cid}`,\n        `https://gateway.pinata.cloud/ipfs/${cid}`,\n        `https://cloudflare-ipfs.com/ipfs/${cid}`,\n        `https://dweb.link/ipfs/${cid}`,\n      ];\n    };\n\n    const urls = buildUrls(ipfsCid);\n    let lastErr: any = undefined;\n    setLoadingQuestions(true);\n    for (const url of urls) {\n      try {\n        const res = await fetch(url, { cache: \"no-store\" });\n        const text = await res.text();\n        if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);\n        const ct = (res.headers.get(\"content-type\") || \"\").toLowerCase();\n        const looksJson = ct.includes(\"application/json\") || text.trim().startsWith(\"[\") || text.trim().startsWith(\"{\");\n        if (!looksJson) {\n          // 该网关返回了 HTML（常见 404 网关页），尝试下一个\n          lastErr = new Error(\"Gateway returned non-JSON (likely HTML)\");\n          continue;\n        }\n        const arr = JSON.parse(text) as QuizItem[];\n        setAllQuestions(arr);\n        return arr;\n      } catch (e: any) {\n        lastErr = e;\n        continue;\n      }\n    }\n    setError(\n      `Load IPFS failed: 无法从可用网关获取 JSON（请确认 CID 是否正确，或稍后重试）。` +\n        (lastErr?.message ? ` (${lastErr.message})` : \"\")\n    );\n    return [];\n  }, [ipfsCid]);\n\n  // 预取题库，便于在开始前显示数量并启用按钮\n  useEffect(() => {\n    if (!ipfsCid) return;\n    loadFromIPFS()\n      .catch(() => {})\n      .finally(() => setLoadingQuestions(false));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ipfsCid]);\n\n  const start = useCallback(async () => {\n    setFinished(false);\n    setStarted(true);\n    setScoreClear(undefined);\n    setIndex(0);\n    setLocalScore(0);\n    const arr = allQuestions.length ? allQuestions : await loadFromIPFS();\n    // 随机抽取 questionCount\n    const shuffled = [...arr].sort(() => Math.random() - 0.5).slice(0, questionCount);\n    setQuiz(shuffled);\n  }, [allQuestions, loadFromIPFS, questionCount]);\n\n  const current = useMemo(() => quiz[index], [quiz, index]);\n\n  const answer = useCallback(async (optionIndex: number) => {\n    if (!current) return;\n    // 确保拿到用户地址（请求账户后立刻使用本地变量，避免因 setState 异步导致 address 仍为空）\n    let userAddr = address as string | undefined;\n    if (!userAddr) {\n      try {\n        const w = (window as any).ethereum;\n        if (w) {\n          const accs: string[] = await w.request({ method: \"eth_requestAccounts\" });\n          userAddr = accs?.[0];\n          if (userAddr) setAddress(userAddr);\n        }\n      } catch {}\n    }\n    if (!userAddr && signer) {\n      try {\n        userAddr = await signer.getAddress();\n        if (userAddr) setAddress(userAddr);\n      } catch {}\n    }\n    if (!userAddr) {\n      setError(\"未获取到钱包地址，请先连接钱包。\");\n      return;\n    }\n    if (!contract) {\n      setError(\"未检测到合约实例，请确认网络为 Sepolia 且前端地址已更新。\");\n      return;\n    }\n    if (!instance) {\n      setError(\"FHEVM 实例未就绪，稍候片刻或刷新页面后重试。\");\n      return;\n    }\n    try {\n      const choice = current.options[optionIndex];\n      const ansHash = ethers.keccak256(ethers.toUtf8Bytes(choice));\n      // 复合题目ID：题库+题号（仅用于链上区分不同题库，合约保持同一接口）\n      const compositeId = makeCompositeIdFromCidAndQuestion(ipfsCid, current.id);\n      const input = instance.createEncryptedInput(contract.target as string, userAddr);\n      input.add32(10); // 每题 +10\n      const enc = await input.encrypt();\n      await (await contract.verifyAnswer(compositeId, ansHash, enc.handles[0], enc.inputProof)).wait();\n\n      // 移除本地分数预览（分数仅通过解密展示）\n\n      if (index + 1 >= quiz.length) {\n        setFinished(true);\n      } else {\n        setIndex((i) => i + 1);\n      }\n    } catch (e: any) {\n      setError(\"提交失败: \" + (e?.message || e));\n    }\n  }, [contract, instance, address, signer, current, index, quiz.length]);\n\n  const decryptScore = useCallback(async () => {\n    if (!contract || !instance || !address) return;\n    try {\n      const handle: string = await (contract as any).getEncryptedScore();\n      const relayer: any = instance;\n      const { publicKey, privateKey } = relayer.generateKeypair();\n      const startTs = Math.floor(Date.now() / 1000);\n      const durationDays = 365;\n      const eip712 = relayer.createEIP712(\n        publicKey,\n        [contract.target as string],\n        startTs,\n        durationDays\n      );\n      const signature = await (signer as JsonRpcSigner).signTypedData(\n        eip712.domain,\n        { UserDecryptRequestVerification: eip712.types.UserDecryptRequestVerification },\n        eip712.message\n      );\n      const res = await relayer.userDecrypt(\n        [{ handle, contractAddress: contract.target as string }],\n        privateKey,\n        publicKey,\n        signature,\n        [contract.target as string],\n        address,\n        startTs,\n        durationDays\n      );\n      setScoreClear(String(res[handle]));\n    } catch (e: any) {\n      setError(\"Decrypt failed: \" + e?.message);\n    }\n  }, [contract, instance, address, signer]);\n\n  const claim = useCallback(async () => {\n    if (!contract) return;\n    try {\n      await (await contract.claimNFT()).wait();\n      setMessage(\"NFT claimed\");\n    } catch (e: any) {\n      setError(\"Claim failed: \" + e?.message);\n    }\n  }, [contract]);\n\n  return {\n    // web3\n    provider, signer, address, chainId, instance,\n    // quiz state\n    quiz, current, index, finished, started, allQuestions,\n    // score\n    scoreClear,\n    // loading\n    loadingQuestions,\n    // errors\n    error, message,\n    // actions\n    start, answer, decryptScore, claim,\n  } as const;\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1251, "column": 0}, "map": {"version":3,"sources":["file:///Users/toolboxb/Desktop/ZAMA/%E5%8D%81%E6%9C%88%E9%A1%B9%E7%9B%AE/%E7%AD%94%E9%A2%98%E6%B8%B8%E6%88%8F/action/quizchain/site/app/quiz/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { useQuizChain } from \"../../hooks/useQuizChain\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useEffect, useState } from \"react\";\n\nexport default function QuizPage() {\n  const router = useRouter();\n  const params = useSearchParams();\n  const cid = params?.get(\"cid\") ?? \"\";\n  const qz = useQuizChain({ ipfsCid: cid, questionCount: 3 });\n  \n  const [timeLeft, setTimeLeft] = useState(120);\n  const [selectedOption, setSelectedOption] = useState<number | null>(null);\n  const [showResult, setShowResult] = useState(false);\n  const [answerResult, setAnswerResult] = useState<\"correct\" | \"wrong\" | null>(null);\n\n  // 计时器逻辑\n  useEffect(() => {\n    if (!qz.started || qz.finished) return;\n    if (timeLeft <= 0) {\n      handleTimeout();\n      return;\n    }\n    const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\n    return () => clearTimeout(timer);\n  }, [timeLeft, qz.started, qz.finished]);\n\n  // 重置计时器\n  useEffect(() => {\n    setTimeLeft(120);\n    setSelectedOption(null);\n    setShowResult(false);\n    setAnswerResult(null);\n  }, [qz.index]);\n\n  const handleTimeout = () => {\n    qz.answer(0); // 超时默认选第一个选项\n  };\n\n  const handleAnswer = async (optionIndex: number) => {\n    if (selectedOption !== null) return; // 防止重复点击\n    setSelectedOption(optionIndex);\n    \n    // 模拟判断正确/错误（这里简化处理，实际根据合约返回）\n    const isCorrect = qz.current?.answer === qz.current?.options[optionIndex];\n    setAnswerResult(isCorrect ? \"correct\" : \"wrong\");\n    setShowResult(true);\n\n    // 延迟提交到合约，让用户看到结果动画\n    setTimeout(async () => {\n      await qz.answer(optionIndex);\n      setShowResult(false);\n    }, 1500);\n  };\n\n  const progressPercent = qz.quiz.length > 0 ? ((qz.index + 1) / qz.quiz.length) * 100 : 0;\n\n  // 缺少 CID 提示\n  if (!cid) {\n    return (\n      <div style={{ \n        minHeight: \"100vh\", \n        width: \"100%\", \n        display: \"flex\", \n        alignItems: \"center\", \n        justifyContent: \"center\",\n        padding: \"20px\"\n      }}>\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"card\" \n          style={{ maxWidth: 600, width: \"100%\", textAlign: \"center\", padding: 40 }}\n        >\n          <h1 className=\"neon-text\" style={{ fontSize: 36, marginBottom: 24 }}>⚠️ 缺少题库</h1>\n          <p style={{ fontSize: 18, marginBottom: 32, color: \"#aaa\" }}>\n            请从首页上传题库并获取 CID，或手动输入 CID 后开始答题。\n          </p>\n          <button className=\"neon-button\" onClick={() => router.push(\"/\")} style={{ padding: \"16px 32px\", fontSize: 18 }}>\n            返回首页\n          </button>\n        </motion.div>\n      </div>\n    );\n  }\n\n  // 开始前界面\n  if (!qz.started) {\n    return (\n      <div style={{ \n        minHeight: \"100vh\", \n        width: \"100%\", \n        display: \"flex\", \n        alignItems: \"center\", \n        justifyContent: \"center\",\n        padding: \"20px\"\n      }}>\n        <motion.div \n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className=\"card\" \n          style={{ maxWidth: 700, width: \"100%\", textAlign: \"center\", padding: 40 }}\n        >\n          <motion.h1 \n            className=\"neon-text\" \n            style={{ fontSize: 44, marginBottom: 20, textShadow: \"0 0 10px #00E0FF, 0 0 18px #6759FF\" }}\n            animate={{ scale: [1, 1.05, 1] }}\n            transition={{ repeat: Infinity, duration: 2 }}\n          >\n            🎯 QuizChain 答题挑战\n          </motion.h1>\n            <p style={{ fontSize: 16, marginBottom: 8, color: \"#9ecde0\" }}>题库 CID: <span style={{ color: \"#00E0FF\" }}>{cid.slice(0, 12)}...</span></p>\n          {(qz.allQuestions.length === 0) ? (\n            <p style={{ fontSize: 18, marginBottom: 28, color: \"#aaa\" }}>正在从 IPFS 加载题目…</p>\n          ) : (\n            <p style={{ fontSize: 18, marginBottom: 28, color: \"#9aa3b2\" }}>题库共 {qz.allQuestions.length} 题 · 每次随机出 {Math.min(3, qz.allQuestions.length)} 题</p>\n          )}\n          {qz.error && <p style={{ color: \"#ff6b6b\", marginBottom: 16 }}>{qz.error}</p>}\n          <motion.button \n            className=\"neon-button\" \n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={qz.start}\n            disabled={!cid || qz.allQuestions.length === 0}\n            style={{ padding: \"18px 48px\", fontSize: 22, fontWeight: 700 }}\n          >\n            {qz.allQuestions.length === 0 ? \"加载中…\" : \"开始答题 🚀\"}\n          </motion.button>\n        </motion.div>\n      </div>\n    );\n  }\n\n  // 答题完成界面\n  if (qz.finished) {\n    return (\n      <div style={{ \n        minHeight: \"100vh\", \n        width: \"100%\", \n        display: \"flex\", \n        alignItems: \"center\", \n        justifyContent: \"center\",\n        padding: \"20px\"\n      }}>\n        <motion.div \n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className=\"card\" \n          style={{ maxWidth: 700, width: \"100%\", textAlign: \"center\", padding: 50 }}\n        >\n          <motion.div\n            animate={{ rotate: [0, 10, -10, 0] }}\n            transition={{ repeat: 3, duration: 0.3 }}\n          >\n            <h1 className=\"neon-text\" style={{ fontSize: 56, marginBottom: 24 }}>🎉 恭喜完成！</h1>\n          </motion.div>\n          <div style={{ marginBottom: 32 }}>\n            <p style={{ fontSize: 22, color: \"#bbb\", marginBottom: 12 }}>您的分数</p>\n            <motion.div \n              className=\"neon-text\"\n              style={{ fontSize: 80, fontWeight: 900 }}\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ type: \"spring\", stiffness: 200 }}\n            >\n              {qz.scoreClear ?? '-'}\n            </motion.div>\n            <p style={{ fontSize: 18, color: \"#888\", marginTop: 12 }}>总分: {qz.quiz.length * 10}</p>\n            <div style={{ marginTop: 20 }}>\n              <button \n                className=\"neon-button\" \n                onClick={qz.decryptScore}\n                style={{ padding: \"12px 28px\", fontSize: 16 }}\n              >\n                解密并查看分数 🔐\n              </button>\n            </div>\n          </div>\n\n          {qz.scoreClear && qz.scoreClear >= 100 && (\n            <motion.div\n              initial={{ y: 20, opacity: 0 }}\n              animate={{ y: 0, opacity: 1 }}\n              transition={{ delay: 0.5 }}\n            >\n              <p style={{ fontSize: 20, color: \"#00E0FF\", marginBottom: 20 }}>✨ 达到领取 NFT 条件！</p>\n              <button \n                className=\"neon-button\" \n                onClick={qz.claim}\n                style={{ padding: \"18px 48px\", fontSize: 22, marginBottom: 16 }}\n              >\n                领取 NFT 🏆\n              </button>\n            </motion.div>\n          )}\n\n          <div style={{ display: \"flex\", gap: 16, justifyContent: \"center\", marginTop: 24 }}>\n            <button className=\"neon-button\" onClick={() => router.push(\"/\")} style={{ padding: \"14px 28px\" }}>\n              返回首页\n            </button>\n            <button className=\"neon-button\" onClick={() => router.push(\"/rank\")} style={{ padding: \"14px 28px\" }}>\n              查看排行榜\n            </button>\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  // 答题进行中\n  return (\n    <div style={{ \n      minHeight: \"100vh\", \n      width: \"100%\", \n      display: \"flex\", \n      alignItems: \"center\", \n      justifyContent: \"center\",\n      padding: \"20px\",\n      position: \"relative\"\n    }}>\n      {/* 顶部进度条 */}\n      <div style={{ position: \"fixed\", top: 0, left: 0, right: 0, height: 6, background: \"rgba(255,255,255,0.1)\", zIndex: 100 }}>\n        <motion.div \n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          style={{ height: \"100%\", background: \"linear-gradient(90deg, #6759FF, #00E0FF)\", borderRadius: 3, width: `${progressPercent}%` }}\n          transition={{ duration: 0.3 }}\n        />\n      </div>\n\n      <motion.div \n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"card\" \n        style={{ maxWidth: 900, width: \"100%\", padding: 40 }}\n      >\n        {qz.error && (\n          <div style={{ marginBottom: 16, color: \"#ff6b6b\", fontSize: 14 }}>\n            {qz.error}\n          </div>\n        )}\n        {/* 题目头部 */}\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: 32 }}>\n          <div>\n            <span style={{ fontSize: 18, color: \"#bbb\" }}>题目 </span>\n            <span className=\"neon-text\" style={{ fontSize: 28, fontWeight: 700 }}>{qz.index + 1}</span>\n            <span style={{ fontSize: 18, color: \"#bbb\" }}> / {qz.quiz.length}</span>\n          </div>\n          <motion.div \n            style={{ \n              fontSize: 32, \n              fontWeight: 900, \n              color: timeLeft <= 10 ? \"#ff6b6b\" : \"#00E0FF\",\n              textShadow: timeLeft <= 10 ? \"0 0 20px #ff6b6b\" : \"0 0 20px #00E0FF\"\n            }}\n            animate={timeLeft <= 10 ? { scale: [1, 1.1, 1] } : {}}\n            transition={{ repeat: timeLeft <= 10 ? Infinity : 0, duration: 0.5 }}\n          >\n            ⏱️ {timeLeft}s\n          </motion.div>\n        </div>\n\n        {/* 题目内容 */}\n        <AnimatePresence mode=\"wait\">\n          {qz.current && (\n            <motion.div\n              key={qz.index}\n              initial={{ x: 100, opacity: 0 }}\n              animate={{ x: 0, opacity: 1 }}\n              exit={{ x: -100, opacity: 0 }}\n              transition={{ duration: 0.3 }}\n            >\n              <h2 style={{ fontSize: 28, marginBottom: 40, lineHeight: 1.6, color: \"#fff\" }}>\n                {qz.current.question}\n              </h2>\n\n              {/* 选项列表 */}\n              <div style={{ display: \"grid\", gap: 20 }}>\n                {qz.current.options.map((option, i) => {\n                  const isSelected = selectedOption === i;\n                  const showCorrect = showResult && answerResult === \"correct\" && isSelected;\n                  const showWrong = showResult && answerResult === \"wrong\" && isSelected;\n\n                  return (\n                    <motion.button\n                      key={i}\n                      className=\"neon-button\"\n                      whileHover={selectedOption === null ? { scale: 1.02, x: 10 } : {}}\n                      whileTap={selectedOption === null ? { scale: 0.98 } : {}}\n                      onClick={() => handleAnswer(i)}\n                      disabled={selectedOption !== null}\n                      style={{\n                        padding: \"20px 28px\",\n                        fontSize: 20,\n                        textAlign: \"left\",\n                        position: \"relative\",\n                        overflow: \"hidden\",\n                        background: showCorrect \n                          ? \"linear-gradient(135deg, #00E676, #00C853)\" \n                          : showWrong \n                          ? \"linear-gradient(135deg, #ff6b6b, #ee5a6f)\" \n                          : isSelected\n                          ? \"linear-gradient(135deg, #4A90E2, #357ABD)\"\n                          : \"linear-gradient(135deg, #6759FF, #8B7FFF)\",\n                        border: isSelected ? \"2px solid #fff\" : \"2px solid #00E0FF\",\n                        cursor: selectedOption !== null ? \"not-allowed\" : \"pointer\",\n                        opacity: selectedOption !== null && !isSelected ? 0.4 : 1,\n                      }}\n                      animate={showCorrect || showWrong ? { scale: [1, 1.05, 1] } : {}}\n                      transition={{ duration: 0.3 }}\n                    >\n                      <span style={{ marginRight: 12, fontSize: 22, fontWeight: 700 }}>\n                        {String.fromCharCode(65 + i)}.\n                      </span>\n                      {option}\n                      {showCorrect && <span style={{ marginLeft: 12 }}>✅</span>}\n                      {showWrong && <span style={{ marginLeft: 12 }}>❌</span>}\n                    </motion.button>\n                  );\n                })}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* 底部分数 */}\n        <div style={{ marginTop: 40, textAlign: \"center\", fontSize: 18, color: \"#bbb\" }}>\n          当前分数: <span className=\"neon-text\" style={{ fontSize: 24, fontWeight: 700 }}>{qz.scoreClear ?? '-'}</span>\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":"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","debugId":null}}]
}